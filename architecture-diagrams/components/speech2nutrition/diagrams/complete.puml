@startuml speech2nutrition-component-diagram
skinparam padding 10
skinparam defaultTextAlignment center
' left to right direction
top to bottom direction

!includesub components/external-services.puml!CHAT_GPT
!includesub components/external-services.puml!WHISPER
!includesub components/external-services.puml!AUDIO_STORAGE

() "Audio File" as AudioFile
AudioStorage -- AudioFile

() "Audio" as Audio
Whisper -( Audio

() "Prompt" as Prompt
ChatGPT --( Prompt

rectangle "Speech 2 Nutrition" as Speech2Nutrition #line.dashed {
    !includesub components/speech2nutrition/definitions.puml!SPEECH_TO_TEXT
    !includesub components/speech2nutrition/definitions.puml!FOOD_FEATURE_EXTRACTION
    !includesub components/speech2nutrition/definitions.puml!FOOD_MAPPING

    () "Audio ID" as AudioID
    SpeechToText --( AudioID
    SpeechToText --( AudioFile
    () "Audio Transcription" as AudioTranscription
    SpeechToText -- AudioTranscription
    SpeechToText -u- Audio

    FoodFeatureExtraction --( AudioTranscription
    () "Food Requests" as FoodRequests
    FoodFeatureExtraction -- FoodRequests
    FoodFeatureExtraction -u- Prompt

    FoodMapping --( FoodRequests
    () "Food Responses" as FoodResponses
    FoodMapping -- FoodResponses

}

@enduml