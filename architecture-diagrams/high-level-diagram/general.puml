@startuml general-high-level-diagram
skinparam padding 10
skinparam defaultTextAlignment center

!includesub definitions.puml!MOBILE_APPLICATION
!includesub definitions.puml!SPEECH_2_DIET_API

!includesub definitions.puml!FIREBASE_AUTH
!includesub definitions.puml!FIRESTORE_DB
!includesub definitions.puml!AUDIO_STORAGE

!includesub definitions.puml!RABBIT_MQ

!includesub definitions.puml!SPEECH_2_NUTRITION
!includesub definitions.puml!NUTRITION_DB
!includesub definitions.puml!CHAT_GPT
!includesub definitions.puml!WHISPER


Speech2DietAPI --> FirestoreDB : manages app data \n [http]
Speech2DietAPI --> AudioStorage : saves audio files \n [http]
Speech2DietAPI -- RabbitMQ

Speech2Nutrition --> NutritionDB : queries nutrition information
Speech2Nutrition --> ChatGPT : parses text using
Speech2Nutrition --> Whisper : transcribes audios using
Speech2Nutrition -u- RabbitMQ
Speech2Nutrition --> AudioStorage : reads audio files \n [http]

MobileApplication --> Speech2DietAPI : makes requests to \n [http]
MobileApplication --> FirebaseAuth : authenticates users \n [http]

@enduml